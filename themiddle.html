<!DOCTYPE html> 
<html>
<head>
<title>Show & Share Homepage</title>  
<script>
    window.onload = function() {
        // Load background color if previously saved
        if (localStorage.getItem("backgroundColor")) {
            document.body.style.backgroundColor = localStorage.getItem("backgroundColor");
        }

        // Load reviews for Gilmore Girls (or dynamic show based on page)
        const showName = "The Middle";  // You can update this dynamically based on the page
        const reviews = JSON.parse(localStorage.getItem(showName)) || [];
        
        const reviewList = document.getElementById('reviewList');
        reviewList.innerHTML = '';

        reviews.forEach(entry => {
            const li = document.createElement('li');
            li.innerHTML = `<strong>Reviewed by ${entry.name}:</strong> ${entry.review}`;
            reviewList.appendChild(li);
        });
    };
    function toggleSpoiler() {
      const spoiler = document.getElementById("spoiler");
      const button = document.querySelector(".button");

      if (spoiler.style.display === "none" || spoiler.style.display === "") {
         spoiler.style.display = "block";
         button.textContent = "Spoiler";
      } else {
         spoiler.style.display = "none";
         button.textContent = "Spoiler";
      }
   }
</script>
<style>
.spoiler {
    display: none;
}
.preserve-line-breaks {
  white-space: pre-line;
}

a {
    color: #275b52;
}
    
a:visited {
    color: #275b52;
}
 
a:active {
    color: #275b52;
}
 
* {
  box-sizing: border-box;
}

div {
    text-align: center;
}

table, th, td {
  border: 3px ridge;
}

table {
  width: 95%;
  text-align: center;
  margin: auto;
  color: #275b52;
  font-size: 35px;
  font-family: "Bradley Hand", Cursive;
  cursor: pointer;
}  

th:hover {background-color: #f2f3f8;}
    
html, body {
  margin: 0;
  margin-top: 20px;
  padding: 0;
  width: 100%;
  height: 100%;
}  

header {
  font-family: "Bradley Hand", Cursive;
  font-weight: bold;
  color: #f2f3f8;
  text-align: center;
  background-color: #59b69a;
  padding: 20px;
  text-align: center;
  font-size: 40px; 
}
    
nav {
    float: left;
    font-size: 25px;
    font-style: italic;
    background: #80a256;  
  	width: 30%;
  	height: 290px; 
  	background: #d23943;
  	padding: 20px;
}

nav ul {
     margin: 0;
     padding: 0;
     width: 100%;
     background: #f2f3f8; 
}

nav li {
     position: relative;
     list-style: none;
     margin: 0;
     border: 3px solid #d23943;
}

nav ul ul {
    position: absolute;
    top: -3px;
    left: 100%;
    font-size: 25px;
    display: none;
}

nav li a {
    display: block;
    padding: 0.25em 0 0.25em 0.5em;
    text-decoration: none;
}

nav li:hover {
    background: #59b69a;
}

nav li.submenu {
    background: url(https://clholtz11.github.io/index.html) 95% 50% no-repeat;
}

nav li.submenu:hover {
    background-color: #59b69a;
}

nav ul.level1 li.submenu:hover ul.level2, nav ul.level2 li.submenu:hover ul.level3 {
    display:block;
}

article {
  float: left;
  padding: 50px;
  width: 70%;
  background-color: #d23943;
  height: 290px;
}
    
h2 {
    font-family: Georgia, Serif;
    font-size: 65px;
    color: #59b69a;
    text-align: center;
    margin: auto;
} 

h3 {
    font-family: Georgia, Serif;
    font-size: 30px;
    color: #621621;
    text-align: center;
    margin: auto;
}

p {
    font-family: "Courier New", Monospace;
    font-size: 50px;
    color: #621621;
    text-align: center; 
    margin: auto;
} 

section::after {
  content: "";
  display: table;
  clear: both;
}

footer {
  padding: 10px;
  text-align: center;
}

@media (max-width: 600px) {
  nav, article {
    width: 100%;
    height: auto;
  }
}
    
</style>   
</head>    
<body>
<header>
    <h1>üì∫ Show & Share ‚úèÔ∏è</h1>
</header>
<section>
<nav>
<ul class='level1'>
 <li><a href="index.html">Home Page</a></li>
 <li class='submenu'><a href='#'>By Ranking</a>
  <ul class='level2'>
   <li><a href="moviesrank.html">Movies</a></li>
   <li><a href="showsrank.html">TV Shows</a></li>
  </ul>
 </li>
 <li class='submenu'><a href='#'>By Genre</a>
  <ul class='level2'>
   <li><a href="genre-comedy.html">Comedy</a></li>
   <li><a href="genre-family.html">Family</a></li>
   <li><a href="genre-drama.html">Drama</a></li>
   <li><a href="genre-horror.html">Horror</a></li>
  </ul>
 </li>
 <li class='submenu'><a href='#'>By Streaming Service</a>
  <ul class='level2'>
   <li><a href="stream-netflix.html">Netflix</a></li>
   <li><a href="stream-max.html">Max</a></li>
   <li><a href="stream-disneyplus.html">Disney +</a></li>
   <li><a href="stream-hulu.html">Hulu</a></li>
  </ul>
 </li>
 <li class='submenu'><a href='#'>My Ratings</a>
  <ul class='level2'>
   <li><a href="gilmoregirls.html">Gilmore Girls</a></li>
   <li><a href="friends.html">Friends</a></li>
   <li><a href="himym.html">How I Met Your Mother</a></li>
   <li><a href="onetreehill.html">One Tree Hill</a></li>
   <li><a href="themiddle.html">The Middle</a></li>
   <li><a href="newgirl.html">New Girl</a></li>
   <li><a href="thefosters.html">The Fosters</a></li>
   <li><a href="bevhills90210.html">Beverly Hills 90210</a></li>
   <li><a href="onceuponatime.html">Once Upon A Time</a></li>
   <li><a href="heartland.html">Heartland</a></li>
  </ul>
 </li>
</ul>
</nav>
<article>
    <h2>My ratings</h2>
    <hr>
    <p>The Middle</p>
</article>
</section>
<footer>
   <table>
     <tr>
        <th onclick="showInfo('Summary', 'tm_summary.txt')">Summary</th>
        <th onclick="showInfo('Rating & Runtime', 'tm_raterun.txt')">Rating & Runtime</th>
        <th onclick="showInfo('Main Cast & Crew', 'tm_cast.txt')">Main Cast</th>
        <th onclick="showInfo('Trivia', 'tm_trivia.txt')">Trivia</th>
        <th onclick="showInfo('Genre, Theme Song, etc.', 'tm_genrets.txt')">Genre, Theme Song, etc.</th>
        <th onclick="showInfo('Review', 'tm_review.txt')">Review</th>
     </tr>
   </table>
   <div id="info-box">
      
      <hr>
      <h3><strong>Click one of the rows to see more information about my #5 show: The Middle!</strong></h3>
      <hr>
      <img src="https://m.media-amazon.com/images/M/MV5BN2FlN2QxZDItM2Y2Ni00OTBmLTgzMmYtMmVlNTNhYTI1OWZkXkEyXkFqcGdeQXRyYW5zY29kZS13b3JrZmxvdw@@._V1_.jpg" style="width: 30%;">
   </div>

   <script>
function showInfo(title, file) {
    const infoBox = document.getElementById('info-box');
    infoBox.innerHTML = `<p>Loading ${title}...</p>`;
    fetch(file)
      .then(response => {
        if (!response.ok) {
          throw new Error(`Could not load ${file}`);
        }
        return response.text(); 
      })
      .then(data => {
        infoBox.innerHTML = `
          <hr>
          <h2 style="color: #59b69a">${title}</h2>
          <hr>
          <h3 style="width: 75%">${data}</h3>
        `;
      })
      .catch(error => {
        infoBox.innerHTML = `<p>Error loading content: ${error.message}</p>`;
      });
}
</script>
<hr>
    <div class="preserve-line-breaks">
        <h2>Want to leave your own review?</h2>
        <h3>Enter a personalized review down below.
        It'll get saved directly to this page for everyone to see!</h3>
    </div>
    <button onclick="window.location.href='your-review.html'" style="margin-top: 10px; padding: 5px 10px; font-size: 30px;">Create New Entry</button>

    <div id="output">
        <hr>
        <h2>Entries:</h2>
        <ol id="reviewList" style="font-family: Georgia, Serif; font-size: 30px; color: #621621; text-align: center; margin: auto;"></ol>
    </div>

<script>
        // Function to handle form submission and saving reviews to localStorage
        const form = document.getElementById('entryForm');
        
        form.addEventListener('submit', function(event) {
            event.preventDefault();
            const entryInput = document.getElementById('entryInput').value;
            const showName = "The Middle"; // Ensure this is dynamic for each show
            
            if (entryInput.trim() !== "") {
                const entries = JSON.parse(localStorage.getItem(showName)) || [];
                entries.push(entryInput);
                localStorage.setItem(showName, JSON.stringify(entries));
                window.location.href = `${showName.toLowerCase().replace(/\s/g, '')}.html`; // Redirect back to the show-specific page
            }
        });
    </script>
</footer>
</body>
</html>
